<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<link rel="stylesheet" type="text/css" href="../../css/mod.css" />
		<link rel="icon" type="image/icon" href="../../favicon.ico" />
		<title>mod开发教程（这不是Java教程）</title>
	</head>
	<body>
		<h2>本游戏目前只有jar版本，后续可能会加入HTML5版本</h2>
		<p>mod开发分为jar版mod和存档数据包</p>
		<ul>
			<li><h2>jar版</h2></li>
			<ul>
				<li>使用JDK11编译，或使用mod制作器</li>
				<li>mod调用的主方法必须是无参无返回的</li>
				<li>类似regdit()的方法是对mod的支持，这代表你需要java面向对象</li>
				<li>例如你要注册一个物品，你需要继承Item类，这一系列的机制用到了Java多态</li>
				<li>然后把你注册的类的对象传入对应方法的参数</li>
				<li>方块、实体不知道<a href="https://space.bilibili.com/157262276/">来自四次元的雪莉</a>有没有写对应的支持</a></li>
				<li>如果有，会加入对应的API文档</li>
				<li>接下来我们看看mod的载入方法</li>
				<ul>
					<li>你需要在jar根目录下建一个文件：options.txt，然后在里面写一些东西</li>
					<li>一个mod必须写这些参数：type:、main-class:</li>
					<li>如果没有main-method参数，则main-class参数指向的类必须继承modTemplate类</li>
					<li>忽略空行和开头、结尾的空格</li>
				</ul>
			</ul>
			<li><h2>存档数据包</h2></li>
			<ul>
				<li>使用JDK11编译</li>
				<li>使用io.github.javaherobrine.ModClassLoader加载</li>
				<li>因为在运行时无法配置classpath参数</li>
				<li>也可以自己写一个自定义ClassLoader</li>
				<li>自定义ClassLoader要用defineClass来加载</li>
				<li>需要options.txt</li>
				<li>和jar版mod一样，但是需要新的参数：packid:，用来标识mod文件夹</li>
				<li>编写方法和jar版mod大同小异</li>
			</ul>
			<li><h2>材质包、光影</h2></li>
			<ul>
				<li>目前没有引擎代码，所以敬请期待</li>
			</ul>
		</ul>
		<script src="../../javascript/switch.js"></script>
		<script src="../../javascript/URL.js"></script>
		<p>在线生成options.txt内容（支持get请求传入）</p>
		<script>
			var v2=get("type");
			var v3=get("main-class");
			var v4=get("main-method");
			if(v2!=undefined||v3!=undefined||v4!=undefined){
				var v5=document.createElement("p");
				v5=document.body.appendChild(v5);
				v5.innerHTML="输出结果（复制到options.txt）";
				output(v2,v3,v4);
			}else{
				var v=document.createElement("p");
				v=document.body.appendChild(v);
				v.innerHTML="请输入mod类型（lib或其他）：<input id='type' type='text' />";
				v=document.createElement("p");
				v=document.body.appendChild(v);
				v.innerHTML="请输入mod主类（包名.类名）：<input id='class' type='text' />";
				v=document.createElement("p");
				v=document.body.appendChild(v);
				v.innerHTML="请输入mod要调用的方法：<input id='method' type='text' />";
				v=document.createElement("button");
				v.addEventListener("click",function(){
					output(document.getElementById('type').value,document.getElementById('class').value,document.getElementById('method').value);
				},true);
				document.body.appendChild(v);
				v.innerHTML="输入完成";
				var v5=document.createElement("p");
				v5=document.body.appendChild(v5);
				v5.innerHTML="输出结果（复制到options.txt）";
			}
		</script>
	</body>
</html>
